# TLS server parameters
smtpd_use_tls = yes
smtpd_tls_mandatory_ciphers = high
smtpd_tls_mandatory_exclude_ciphers = aNULL, MD5, RC4
smtpd_tls_mandatory_protocols = TLSv1
smtpd_tls_preempt_cipherlist = yes

# Diffie-Hellman Ephemeral Elliptic-Curves
smtpd_tls_dh512_param_file = /etc/postfix/dh_512.pem
smtpd_tls_dh1024_param_file = /etc/postfix/dh_1024.pem
smtpd_tls_eecdh_grade = strong

smtpd_tls_session_cache_database = btree:${data_directory}/smtpd_scache

# Spam filtering
smtpd_helo_required = yes
smtpd_helo_restrictions =
	permit_mynetworks,
	reject_invalid_hostname,
	permit

disable_vrfy_command = yes
milter_default_action = accept

smtpd_sender_restrictions =
	permit_mynetworks,
	permit_sasl_authenticated,
	reject_unknown_sender_domain,
	permit

smtpd_client_connection_rate_limit = 20
